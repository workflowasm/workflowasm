// @generated by protoc-gen-es v1.4.2 with parameter "target=ts"
// @generated from file workflowasm/lang/v1/instruction.proto (package workflowasm.lang.v1, syntax proto3)
/* eslint-disable */
// @ts-nocheck

import type { BinaryReadOptions, FieldList, JsonReadOptions, JsonValue, PartialMessage, PlainMessage } from "@bufbuild/protobuf";
import { Message, proto3 } from "@bufbuild/protobuf";

/**
 * Opcodes for WorkflowASM instructions.
 *
 * @generated from enum workflowasm.lang.v1.Opcode
 */
export enum Opcode {
  /**
   * No-op instruction. Execution proceeds without any effect.
   *
   * @generated from enum value: OP_NOOP = 0;
   */
  OP_NOOP = 0,

  /**
   * Push `null` to the stack.
   *
   * Stack signature: `[1]`
   *
   * @generated from enum value: OP_PUSHNULL = 1;
   */
  OP_PUSHNULL = 1,

  /**
   * Push a boolean value to the stack. If `i1==0`, push `false`. If
   * `i1==1`, push `true`.
   *
   * @generated from enum value: OP_PUSHBOOL = 2;
   */
  OP_PUSHBOOL = 2,

  /**
   * Push the constant integer value given by `i1` to the stack.
   *
   * `i1`: The literal constant to push.
   *
   * Stack signature: `[1]`
   *
   * @generated from enum value: OP_PUSHINT = 3;
   */
  OP_PUSHINT = 3,

  /**
   * Push the depth of the stack (as an int64) to the stack. (Note that
   * the result left by this opcode is not counted in the stack depth.)
   *
   * Stack signature: `[1]`
   *
   * @generated from enum value: OP_PUSHDEPTH = 4;
   */
  OP_PUSHDEPTH = 4,

  /**
   * Push a value from the function's constant table to the top of the
   * value stack.
   *
   * `i1`: Index into the constant table of the constant to push.
   *
   * Stack signature: `[1]`
   *
   * Throws:
   * * `google.rpc.Code.OUT_OF_RANGE` if no such index exists in
   * the constant table.
   *
   * @generated from enum value: OP_PUSHK = 5;
   */
  OP_PUSHK = 5,

  /**
   * Duplicate the value at `stack(-i1)` and push it. For non-primitive values,
   * this is a deep duplication. Nothing is removed from the stack.
   *
   * `i1`: Negative of stack index to duplicate.
   *
   * Stack signature: `[1]`
   *
   * Throws:
   * * `google.rpc.Code.INVALID_ARGUMENT` if the value cannot be duplicated.
   * * `google.rpc.Code.FAILED_PRECONDITION` if `i1` is an invalid stack index.
   *
   * @generated from enum value: OP_DUP = 6;
   */
  OP_DUP = 6,

  /**
   * Pop `i1` values from the top of the stack, discarding them
   *
   * `i1`: Number of values to pop. If `0` is given, 1 value will still be
   * popped.
   *
   * Stack signature: `[-i1]`
   *
   * Throws:
   * * `google.rpc.Code.FAILED_PRECONDITION` if `depth < i1`
   *
   * @generated from enum value: OP_POP = 7;
   */
  OP_POP = 7,

  /**
   * Drop the element at position `-i1` from the stack.
   *
   * Stack signature: `[-1]`
   *
   * @generated from enum value: OP_DROP = 8;
   */
  OP_DROP = 8,

  /**
   * Roll the top `i1` values on the stack. Effectively, moves the object
   * at `stack(-i1 + 1)` to the top of the stack.
   *
   * `i1`: Number of stack entries to roll.
   *
   * Stack signature: `[]`
   *
   * Throws:
   * * `google.rpc.Code.FAILED_PRECONDITION` if `depth < i1`
   *
   * @generated from enum value: OP_ROLL = 9;
   */
  OP_ROLL = 9,

  /**
   * Push `env[stack(0)]` to the stack. If the value doesn't exist in
   * the environment, `null` is pushed.
   *
   * Stack signature: `[-1, 1]`
   *
   * @generated from enum value: OP_GETVAR = 10;
   */
  OP_GETVAR = 10,

  /**
   * Perform `env[stack(0)] = stack(-1)`.
   *
   * Stack signature: `[-2]`
   *
   * @generated from enum value: OP_SETVAR = 11;
   */
  OP_SETVAR = 11,

  /**
   * Remove `env[stack(0)]` from the environment. If there is no such
   * environment variable, this is a no-op.
   *
   * Stack signature: `[-1]`
   *
   * @generated from enum value: OP_CLEARVAR = 12;
   */
  OP_CLEARVAR = 12,

  /**
   * Determine if `env[stack(0)]` exists. Pushes boolean TRUE or FALSE.
   *
   * Stack signature: `[-1, 1]`
   *
   * @generated from enum value: OP_CHECKVAR = 13;
   */
  OP_CHECKVAR = 13,

  /**
   * Computes the Boolean equivalent of the value atop the stack. If the result
   * is equivalent to `i1`,
   * the next instruction in the code segment is skipped. If the
   * result is not, the next instruction in the code segment is executed.
   * The next instruction is expected to be a JMP to an "else" branch.
   *
   * `i1`: If `i1 == 0`, the branch is taken if true. If `i1 != 0`, the branch
   * is taken if false.
   *
   * Stack signature: `[-1]`
   *
   * @generated from enum value: OP_TEST = 14;
   */
  OP_TEST = 14,

  /**
   * Jump instruction. Moves the instruction pointer to another index within the
   * currently-executing code segment.
   *
   * `i1`: Position in function to jump to.
   *
   * @generated from enum value: OP_JMP = 15;
   */
  OP_JMP = 15,

  /**
   * Push an environment onto the call stack.
   *
   * @generated from enum value: OP_ENVPUSH = 16;
   */
  OP_ENVPUSH = 16,

  /**
   * Pop an environment off the call stack.
   *
   * @generated from enum value: OP_ENVPOP = 17;
   */
  OP_ENVPOP = 17,

  /**
   * Calls the function at `stack(0)` with `stack(-1)` arguments ranging
   * from `stack(-2)` to `stack(-2 - stack(-1) - 1)`. If the function
   * returns with success, leaves the return value on the stack.
   *
   * `i1`: If `i1 == 1`, this call is treated as a `try`. `result` and `error`
   * are pushed to the stack, with `error` being `null` if there was no error.
   * and `result` being `null` if an error was caught.
   *
   * Stack signature: `[-(stack(-1) + 2), (i1 == 1) ? 2 : 1]`
   *
   * @generated from enum value: OP_CALL = 18;
   */
  OP_CALL = 18,

  /**
   * Return to the previous function in the call stack, with the instruction
   * pointer advanced past `OP_CALL`. The value of `stack(0)` will be returned
   * and pushed at the call site as a successful result.
   *
   * Stack signature: `[-1]`
   *
   * @generated from enum value: OP_RETURN = 19;
   */
  OP_RETURN = 19,

  /**
   * Throw an error. `stack(0)` must be a `google.rpc.Status`. The stack is
   * unwound until a frame with an error handler is reached, and control
   * is returned to that frame. 
   *
   * @generated from enum value: OP_THROW = 20;
   */
  OP_THROW = 20,

  /**
   * Execute `OP(stack(0), stack(-1))`, pushing the result.
   *
   * Stack signature: `[-2, 1]`
   *
   * @generated from enum value: OP_BINOP = 21;
   */
  OP_BINOP = 21,

  /**
   * Execute `OP(stack(0))`, pushing the result.
   *
   * Stack signature: `[-1, 1]`
   *
   * @generated from enum value: OP_UNOP = 22;
   */
  OP_UNOP = 22,

  /**
   * Compute `stack(-1)[stack(0)]`, where `stack(-1)` must be an indexable
   * value (list, map, or object). If the index doesn't exist on the
   * value, `undefined` is pushed. If the value wasn't indexable, an
   * error is thrown.
   *
   * Stack signature: `[-2, 1]`
   *
   * @generated from enum value: OP_INDEX = 23;
   */
  OP_INDEX = 23,

  /**
   * Compute the length of `stack(0)`, where `stack(0)` is a list. If
   * `stack(0)` isn't a list, an error is thrown.
   *
   * @generated from enum value: OP_LLEN = 24;
   */
  OP_LLEN = 24,

  /**
   * Remove the first `stack(0)` elements from list `stack(-1)`, pushing
   * result as a new list. If the list has insufficient elements, an
   * empty list is pushed.
   *
   * @generated from enum value: OP_LREST = 25;
   */
  OP_LREST = 25,

  /**
   * Given a number `n = stack(0)` of entries to exclude, and `stack(-1)`
   * through `stack(-n)` containing object key names corresponding to
   * those entries, remove each of those entries from the message or map
   * at `stack(-n-1)`, leaving a new map on the stack representing
   * the original object with those entries omitted.
   *
   * @generated from enum value: OP_OREST = 26;
   */
  OP_OREST = 26,
}
// Retrieve enum metadata with: proto3.getEnumType(Opcode)
proto3.util.setEnumType(Opcode, "workflowasm.lang.v1.Opcode", [
  { no: 0, name: "OP_NOOP" },
  { no: 1, name: "OP_PUSHNULL" },
  { no: 2, name: "OP_PUSHBOOL" },
  { no: 3, name: "OP_PUSHINT" },
  { no: 4, name: "OP_PUSHDEPTH" },
  { no: 5, name: "OP_PUSHK" },
  { no: 6, name: "OP_DUP" },
  { no: 7, name: "OP_POP" },
  { no: 8, name: "OP_DROP" },
  { no: 9, name: "OP_ROLL" },
  { no: 10, name: "OP_GETVAR" },
  { no: 11, name: "OP_SETVAR" },
  { no: 12, name: "OP_CLEARVAR" },
  { no: 13, name: "OP_CHECKVAR" },
  { no: 14, name: "OP_TEST" },
  { no: 15, name: "OP_JMP" },
  { no: 16, name: "OP_ENVPUSH" },
  { no: 17, name: "OP_ENVPOP" },
  { no: 18, name: "OP_CALL" },
  { no: 19, name: "OP_RETURN" },
  { no: 20, name: "OP_THROW" },
  { no: 21, name: "OP_BINOP" },
  { no: 22, name: "OP_UNOP" },
  { no: 23, name: "OP_INDEX" },
  { no: 24, name: "OP_LLEN" },
  { no: 25, name: "OP_LREST" },
  { no: 26, name: "OP_OREST" },
]);

/**
 * Binary operators
 *
 * @generated from enum workflowasm.lang.v1.Binop
 */
export enum Binop {
  /**
   * @generated from enum value: BINOP_ADD = 0;
   */
  ADD = 0,

  /**
   * @generated from enum value: BINOP_SUB = 1;
   */
  SUB = 1,

  /**
   * @generated from enum value: BINOP_MUL = 2;
   */
  MUL = 2,

  /**
   * @generated from enum value: BINOP_DIV = 3;
   */
  DIV = 3,

  /**
   * @generated from enum value: BINOP_MOD = 4;
   */
  MOD = 4,

  /**
   * @generated from enum value: BINOP_POW = 5;
   */
  POW = 5,

  /**
   * @generated from enum value: BINOP_AND = 6;
   */
  AND = 6,

  /**
   * @generated from enum value: BINOP_OR = 7;
   */
  OR = 7,

  /**
   * @generated from enum value: BINOP_EQ = 8;
   */
  EQ = 8,

  /**
   * @generated from enum value: BINOP_LT = 9;
   */
  LT = 9,

  /**
   * @generated from enum value: BINOP_LE = 10;
   */
  LE = 10,

  /**
   * @generated from enum value: BINOP_NULLISH_COALESCE = 11;
   */
  NULLISH_COALESCE = 11,
}
// Retrieve enum metadata with: proto3.getEnumType(Binop)
proto3.util.setEnumType(Binop, "workflowasm.lang.v1.Binop", [
  { no: 0, name: "BINOP_ADD" },
  { no: 1, name: "BINOP_SUB" },
  { no: 2, name: "BINOP_MUL" },
  { no: 3, name: "BINOP_DIV" },
  { no: 4, name: "BINOP_MOD" },
  { no: 5, name: "BINOP_POW" },
  { no: 6, name: "BINOP_AND" },
  { no: 7, name: "BINOP_OR" },
  { no: 8, name: "BINOP_EQ" },
  { no: 9, name: "BINOP_LT" },
  { no: 10, name: "BINOP_LE" },
  { no: 11, name: "BINOP_NULLISH_COALESCE" },
]);

/**
 * Unary operators
 *
 * @generated from enum workflowasm.lang.v1.Unop
 */
export enum Unop {
  /**
   * @generated from enum value: UNOP_MINUS = 0;
   */
  MINUS = 0,

  /**
   * @generated from enum value: UNOP_NOT = 1;
   */
  NOT = 1,
}
// Retrieve enum metadata with: proto3.getEnumType(Unop)
proto3.util.setEnumType(Unop, "workflowasm.lang.v1.Unop", [
  { no: 0, name: "UNOP_MINUS" },
  { no: 1, name: "UNOP_NOT" },
]);

/**
 * A single instruction in a WorkflowASM program.
 *
 * @generated from message workflowasm.lang.v1.Instruction
 */
export class Instruction extends Message<Instruction> {
  /**
   * Opcode for the instruction
   *
   * @generated from field: workflowasm.lang.v1.Opcode opcode = 1;
   */
  opcode = Opcode.OP_NOOP;

  /**
   * Integer parameter 1. Interpretation of this parameter depends on the
   * opcode.
   *
   * @generated from field: int32 i1 = 2;
   */
  i1 = 0;

  constructor(data?: PartialMessage<Instruction>) {
    super();
    proto3.util.initPartial(data, this);
  }

  static readonly runtime: typeof proto3 = proto3;
  static readonly typeName = "workflowasm.lang.v1.Instruction";
  static readonly fields: FieldList = proto3.util.newFieldList(() => [
    { no: 1, name: "opcode", kind: "enum", T: proto3.getEnumType(Opcode) },
    { no: 2, name: "i1", kind: "scalar", T: 5 /* ScalarType.INT32 */ },
  ]);

  static fromBinary(bytes: Uint8Array, options?: Partial<BinaryReadOptions>): Instruction {
    return new Instruction().fromBinary(bytes, options);
  }

  static fromJson(jsonValue: JsonValue, options?: Partial<JsonReadOptions>): Instruction {
    return new Instruction().fromJson(jsonValue, options);
  }

  static fromJsonString(jsonString: string, options?: Partial<JsonReadOptions>): Instruction {
    return new Instruction().fromJsonString(jsonString, options);
  }

  static equals(a: Instruction | PlainMessage<Instruction> | undefined, b: Instruction | PlainMessage<Instruction> | undefined): boolean {
    return proto3.util.equals(Instruction, a, b);
  }
}

